import{a as ie}from"./chunk-OE5TAB7K.js";import{a as te}from"./chunk-C64BF37Z.js";import{g as ne}from"./chunk-6M4S47P5.js";import"./chunk-DHWZOWGV.js";import"./chunk-IQQILWT5.js";import"./chunk-DRGJOWSF.js";import{a as U,b as y,c as B,d as q,e as G,g as A,h as W,i as Z,j as Y,k as H,l as X,m as J,n as K,o as Q,r as $,t as ee}from"./chunk-CORW4I6O.js";import"./chunk-CVXY7XBU.js";import"./chunk-3R3HMUER.js";import{W as D,oa as P}from"./chunk-ZRYNGCPJ.js";import"./chunk-WKPBOR6A.js";import{a as R}from"./chunk-WMK6HADQ.js";import{k as N,o as j}from"./chunk-2D6DNJWQ.js";import{Ab as o,Bb as p,Cb as M,Fb as u,Gb as m,Kb as w,Qb as l,Ua as v,Ub as V,Vb as T,Wb as L,Ya as c,Yb as z,Za as _,Zb as I,_ as O,ia as k,ja as E,jb as C,n as S,pb as f,ra as F,sa as d,ta as g,vb as x,zb as i}from"./chunk-LPSFCYGT.js";import"./chunk-XK3LJZ6K.js";import{i as b}from"./chunk-66YHNWRR.js";var le=()=>({standalone:!0});function se(r,a){r&1&&p(0,"app-loading-spinner")}function ce(r,a){r&1&&(i(0,"span",12),l(1,"ce champ est obligatoire"),o())}function me(r,a){r&1&&(i(0,"span",12),l(1,"ce champ est obligatoire"),o())}function de(r,a){if(r&1){let n=M();i(0,"div",2)(1,"div",4)(2,"div",5),p(3,"img",6),o(),i(4,"h2"),l(5,"Bienvenue de retour !"),o(),i(6,"p"),l(7,"Connectez-vous pour continuer sur le dashboard "),o()(),i(8,"form",7),u("keyup.enter",function(){d(n);let e=m();return g(e.login())}),i(9,"div",8)(10,"div",9)(11,"div",10),p(12,"input",11),C(13,ce,2,0,"span",12),o(),i(14,"div",10),p(15,"input",13),i(16,"i",14),u("click",function(){d(n);let e=m();return g(e.isPasswordVisible?e.isPasswordVisible=!1:e.isPasswordVisible=!0)}),o(),C(17,me,2,0,"span",12),o(),i(18,"div",10)(19,"div",15)(20,"div",16)(21,"input",17),u("click",function(){d(n);let e=m();return g(e.checkRemindMe())}),o(),i(22,"label",18),l(23," Se souvenir de moi"),o(),p(24,"br"),o(),i(25,"a",19),u("click",function(){d(n);let e=m();return g(e.interface="forget")}),l(26,"Mot de passe oubli\xE9 ?"),o()()(),i(27,"div",10)(28,"app-button",20),u("handleClick",function(){d(n);let e=m();return g(e.login())}),o()()(),i(29,"div",21)(30,"span",22),l(31,"\xA9 2024 Sport E-commerce. Propuls\xE9 par "),i(32,"small"),l(33,"@ zineddine zebiri"),o()()()()()()}if(r&2){let n=m();c(3),w("src","assets/images/brand",n.themeService.theme=="dark"?"-inverse":"",".png",v),c(5),f("formGroup",n.loginForm),c(5),x(n.submitted&&(n.loF.username.errors!=null&&n.loF.username.errors.required)?13:-1),c(2),f("type",n.isPasswordVisible?"text":"password"),c(),f("ngClass",n.isPasswordVisible?"ri-eye-off-line":"ri-eye-line"),c(),x(n.submitted&&(n.loF.password.errors!=null&&n.loF.password.errors.required)?17:-1),c(11),f("outlined",n.outlined)}}function ge(r,a){r&1&&(i(0,"span",12),l(1,"ce champ est obligatoire"),o())}function pe(r,a){if(r&1){let n=M();i(0,"div",2)(1,"div",4)(2,"div",5),p(3,"img",6),o(),i(4,"h2"),l(5,"Mot de passe oubli\xE9 ?"),o(),i(6,"p"),l(7,"Pas de souci, nous vous enverrons des instructions de r\xE9initialisation."),o()(),i(8,"div",8)(9,"form",23),u("keyup.enter",function(){d(n);let e=m();return g(e.sendPasswordReset(e.email))}),i(10,"div",9)(11,"div",10)(12,"input",24),L("ngModelChange",function(e){d(n);let s=m();return T(s.email,e)||(s.email=e),g(e)}),o(),C(13,ge,2,0,"span",12),o(),i(14,"div",10)(15,"app-button",25),u("handleClick",function(){d(n);let e=m();return g(e.sendPasswordReset(e.email))}),o()()(),i(16,"div",26)(17,"div",27),p(18,"i",28),i(19,"a",19),u("click",function(){d(n);let e=m();return e.interface="login",g(e.submitted=!1)}),l(20,"Retour \xE0 la connexion"),o()()(),i(21,"div",21)(22,"span",22),l(23,"\xA9 2024 Sport E-commerce. Propuls\xE9 par "),i(24,"small"),l(25,"@ zineddine zebiri"),o()()()()()()}if(r&2){let n=m();c(3),w("src","assets/images/brand",n.themeService.theme=="dark"?"-inverse":"",".png",v),c(9),f("inputMask",n.emailInputMask),V("ngModel",n.email),f("ngModelOptions",I(7,le)),c(),x(n.submitted&&n.email==""?13:-1),c(2),f("outlined",n.outlined)}}var oe=(()=>{let a=class a{constructor(t,e,s,h,re){this.themeService=t,this.authFirebaseService=e,this.applicationService=s,this.formBuilder=h,this.router=re,this.interface="login",this.clearPassword="",this.submitted=!1,this.isPasswordVisible=!1,this.loading=!1,this.remindMe=!1,this.token="",this.otp="",this.outlined=!1,this.email="",this.emailInputMask=$}ngOnChanges(t){}ngOnDestroy(){}ngOnInit(){this.initLoginForm()}onInputPassword(t){console.log(t.target.value),this.clearPassword=t.target.value}initLoginForm(){this.loginForm=this.formBuilder.group({username:[null,[y.required]],password:[null,[y.required]]})}get loF(){return this.loginForm.controls}get loFValues(){return this.loginForm.value}login(){return b(this,null,function*(){if(this.loading=!0,this.submitted=!0,this.loginForm.invalid){this.loading=!1;return}else{console.log(this.loginForm.value);let{username:t,password:e}=this.loginForm.value;this.authFirebaseService.login(t,e).subscribe({next:s=>{console.log(s);try{this.logInToTheSession(s)}catch(h){console.log("Error handling login process",h)}},error:s=>{console.error(s),setTimeout(()=>{this.authMsg="Bad credentials.",this.applicationService.showSwalDialog(this.authMsg,"error","#ffcccc"),this.loading=!1},1e3)}})}})}loginWithGoogle(){this.loading=!0,this.authFirebaseService.loginWithGoogle().subscribe({next:t=>{console.log(t);try{this.logInToTheSession(t)}catch(e){console.log("Error handling login process",e)}},error:t=>{console.error(t),setTimeout(()=>{this.authMsg="Unknown error.",this.applicationService.showSwalDialog(this.authMsg,"error","#ffcccc"),this.loading=!1},1e3)}})}checkRemindMe(){this.remindMe=!this.remindMe}logInToTheSession(t){if(t){let e=t.user;e&&S(e.getIdToken()).subscribe(s=>b(this,null,function*(){console.log("Access Token:",s),console.log("User Info:",{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL}),this.otp="1>6Z7fdxb;Zfvs,H",this.otp&&this.otp==="1>6Z7xb;Zfvs,H"?(this.authMsg="You must complete your registration!",this.loading=!1,this.applicationService.showSwalDialog(this.authMsg,"warning","#ffd5b9"),setTimeout(()=>{this.router.navigate(["/auth/otp"]).then(()=>console.log("Navigated to OTP page"))},500)):(this.authMsg="You are logged in!",this.loading=!1,this.applicationService.showSwalDialog(this.authMsg,"success","#cce5cc"),setTimeout(()=>{this.applicationService.saveLocalData("remind-me",this.remindMe),this.router.navigate(["/"]).then(()=>console.log("Navigated to home"))},500))}))}}sendPasswordReset(t){this.submitted=!0,console.log(t),!(this.submitted&&t=="")&&this.authFirebaseService.sendPasswordReset(t).then(e=>{this.loginForm.patchValue({username:this.email}),this.applicationService.showSwalDialog("reset link sent to your email","success","#cce5cc")})}onInputEmail(t){this.email=t.target.value,this.loginForm.patchValue({username:this.email})}};a.\u0275fac=function(e){return new(e||a)(_(te),_(ne),_(ee),_(H),_(D))},a.\u0275cmp=k({type:a,selectors:[["app-login"]],standalone:!0,features:[F,z],decls:6,vars:2,consts:[[1,"login-container"],[1,"login-panel"],[1,"container","fade-in-fwd"],[1,"login-right","d-sm-none"],[1,"row","d-flex","align-center","justify-content-center","flex-column"],[1,"d-flex","align-center"],["height","60",1,"mr-5",3,"src"],[1,"x-small-mt",3,"keyup.enter","formGroup"],[1,"login-form"],[1,"row"],[1,"col-12","form-group"],["type","text","placeholder","entrez votre email","formControlName","username"],[1,"required-message"],["placeholder","entrez votre mot de passe","formControlName","password",2,"height","55px",3,"type"],[1,"password-icon",3,"click","ngClass"],[1,"d-flex","align-center","justify-content-between"],[1,"d-flex","align-center","justify-content-start"],["type","checkbox","id","remind-me",3,"click"],["for","remind-me"],[1,"primary-text","cursor-pointer",3,"click"],["label","Connexion","icon","ri-arrow-right-circle-fill",1,"mr-5",3,"handleClick","outlined"],[1,"row","d-flex","align-center","justify-content-center","small-mt","flex-column"],[1,"x-small-mt"],["ngForm","",3,"keyup.enter"],["type","text","placeholder","entrez votre email",2,"height","55px",3,"ngModelChange","inputMask","ngModel","ngModelOptions"],["label","R\xE9initialiser le mot de passe","icon","ri-arrow-right-circle-fill",1,"mr-5",3,"handleClick","outlined"],[1,"row","align-center","justify-content-center"],[1,"d-flex","align-center","justify-start"],[1,"ri-arrow-left-line","primary-text","mr-5"]],template:function(e,s){if(e&1&&(C(0,se,1,0,"app-loading-spinner"),i(1,"div",0)(2,"div",1),C(3,de,34,8,"div",2)(4,pe,26,8,"div",2),o(),p(5,"div",3),o()),e&2){let h;x(s.loading?0:-1),c(3),x((h=s.interface)==="login"?3:h==="forget"?4:-1)}},dependencies:[j,N,R,J,W,U,B,q,Z,Y,ie,Q,K,X,A,G],styles:['@font-face{font-family:Ubuntu;src:url("./media/Ubuntu-Regular-P57X6VB5.ttf") format("truetype");font-weight:400;font-style:normal}[_ngcontent-%COMP%]:root{--bg-color: #ffffff;--font-color: #000000;--hover-font-color: #000000;--input-border-color: rgba(128, 128, 128, .44);--main-bg-color: #f2f2f2;--main-primary-color: #C7253E;--main-secoundary-color: #f9e9eb;--focus-border-color: #E8476057;--btn-bg-color:#C7253E;--btn-color:#ffffff;--btn-hover-color:#8b192b;--card-footer-border-color:rgba(27, 31, 35, .15);--footer-color:#000;--box-shadow: $box-shadow}[data-theme=dark][_ngcontent-%COMP%]{--bg-color: #161625;--font-color: #ffffff;--hover-font-color: #000000;--input-border-color: #E8476057;--main-bg-color: rgb(14, 14, 27);--main-primary-color: #C7253E;--main-secoundary-color: #f9e9eb;--focus-border-color: rgba(255, 255, 255, .16);--btn-bg-color:#C7253E;--btn-color:#ffffff;--btn-hover-color:#8b192b;--card-footer-border-color:rgba(60, 64, 68, .78);--footer-color:#fff;--box-shadow: $box-shadow}[_ngcontent-%COMP%]:dir(ltr){font-family:Ubuntu,sans-serif;--small-font-size: 11px;--normal-font-size: 14px;--medium-font-size: 18px;--big-font-size: 21px}[_ngcontent-%COMP%]:dir(rtl){font-family:Ubuntu,sans-serif;--small-font-size: 13px;--normal-font-size: 16px;--medium-font-size: 20px;--big-font-size: 23px}.excel-color[_ngcontent-%COMP%]{color:green!important}.pdf-color[_ngcontent-%COMP%]{color:#ff4500!important}.focus-color[_ngcontent-%COMP%]{border-color:var(--main-secoundary-color);outline:0;-webkit-box-shadow:0 0 0 .1rem rgba(199,37,62,.31);box-shadow:0 0 0 .1rem #c7253e4f}.login-container[_ngcontent-%COMP%]{box-sizing:border-box;margin:3% 15%;display:flex;position:absolute;inset:0;overflow:hidden;box-shadow:#0000003d 0 3px 8px}.login-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:55px}.login-container[_ngcontent-%COMP%]   .login-panel[_ngcontent-%COMP%]{flex:1;overflow-y:auto;background-color:var(--bg-color);color:var(--font-color);position:relative}.login-container[_ngcontent-%COMP%]   .login-panel[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:10px 8%}.login-container[_ngcontent-%COMP%]   .login-panel[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.login-container[_ngcontent-%COMP%]   .login-panel[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0}.login-container[_ngcontent-%COMP%]   .login-panel[_ngcontent-%COMP%]   .password-icon[_ngcontent-%COMP%]{position:relative;top:-37px;left:90%;font-size:17px;cursor:pointer}.login-container[_ngcontent-%COMP%]   .login-right[_ngcontent-%COMP%]{flex:1;background-image:url("./media/Login-cuate-SZADEVY4.png");background-repeat:no-repeat;background-size:cover}.login-container[_ngcontent-%COMP%]   .required-message[_ngcontent-%COMP%]{font-size:var(--small-font-size);color:#cd5c5c}.login-container[_ngcontent-%COMP%]   .or-login-with[_ngcontent-%COMP%]{height:1px;margin-top:10px;background-color:var(--font-color)}.login-container[_ngcontent-%COMP%]   .or-login-with-text[_ngcontent-%COMP%]{background-color:var(--bg-color);padding:.4em 1em}.login-container[_ngcontent-%COMP%]   .social-card[_ngcontent-%COMP%]{box-shadow:0 2px 4px #00000014;background-color:var(--main-bg-color);display:flex;align-items:center;justify-content:center;padding:.5em;margin:.5em;border-radius:.5em;cursor:pointer}.login-container[_ngcontent-%COMP%]   .social-card[_ngcontent-%COMP%]:active{transform:scale(.98);box-shadow:#63636333 0 2px 8px}.login-container[_ngcontent-%COMP%]   .social-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:16px;width:16px;border-radius:50%}.login-container[_ngcontent-%COMP%]   .social-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:dir(ltr){margin-right:5px}.login-container[_ngcontent-%COMP%]   .social-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:dir(rtl){margin-left:5px}.login-container[_ngcontent-%COMP%]   .social-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.login-container[_ngcontent-%COMP%]   .powered-by[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:15px;left:0}@media (max-width: 767px){.login-container[_ngcontent-%COMP%]{margin:1%}}']});let r=a;return r})();var ue=[{path:"login",component:oe}],Ie=(()=>{let a=class a{};a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=E({type:a}),a.\u0275inj=O({imports:[P.forChild(ue),P]});let r=a;return r})();export{Ie as AuthRoues,ue as routes};
